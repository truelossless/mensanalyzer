(function(e){function t(t){for(var n,o,i=t[0],c=t[1],d=t[2],l=0,f=[];l<i.length;l++)o=i[l],s[o]&&f.push(s[o][0]),s[o]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);u&&u(t);while(f.length)f.shift()();return r.push.apply(r,d||[]),a()}function a(){for(var e,t=0;t<r.length;t++){for(var a=r[t],n=!0,i=1;i<a.length;i++){var c=a[i];0!==s[c]&&(n=!1)}n&&(r.splice(t--,1),e=o(o.s=a[0]))}return e}var n={},s={app:0},r=[];function o(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=n,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(a,n,function(t){return e[t]}.bind(null,n));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var d=0;d<i.length;d++)t(i[d]);var u=c;r.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"034f":function(e,t,a){"use strict";var n=a("64a9"),s=a.n(n);s.a},4678:function(e,t,a){var n={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-SG":"cdab","./en-SG.js":"cdab","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-nz":"6f50","./en-nz.js":"6f50","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-tw":"90ea","./zh-tw.js":"90ea"};function s(e){var t=r(e);return a(t)}function r(e){var t=n[e];if(!(t+1)){var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}return t}s.keys=function(){return Object.keys(n)},s.resolve=r,e.exports=s,s.id="4678"},"50a6":function(e,t,a){"use strict";var n=a("b149"),s=a.n(n);s.a},"56d7":function(e,t,a){"use strict";a.r(t);a("cadf"),a("551c"),a("f751"),a("097d");var n=a("2b0e"),s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("div",{staticClass:"container"},[a("header",[a("h2",[e._v("Mensanalyzer")]),a("p",[e._v("Un diable de programme pour analyser les repas *variés* de notre self adoré")]),a("button",{staticClass:"button-primary",domProps:{innerHTML:e._s(e.btnText)},on:{click:e.btnClicked}})]),a("transition",{attrs:{name:"component-slide",mode:"out-in"}},[a(e.currentPage,{tag:"component"})],1),e._m(0)],1)])},r=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"credits"}},[a("hr"),a("p",[e._v("Créé par "),a("a",{attrs:{href:"https://github.com/truelossless/"}},[e._v("Esteban Gressard")])]),a("p",[e._v("Code disponible sous licence MIT sur "),a("a",{attrs:{href:"https://github.com/truelossless/mensanalyzer/"}},[e._v("Github")])]),a("p",[e._v("Propulsé fièrement par "),a("a",{attrs:{href:"https://nodejs.org/en/"}},[e._v("Node.js")]),e._v(", "),a("a",{attrs:{href:"https://vuejs.org/"}},[e._v("Vue")]),e._v(", "),a("a",{attrs:{href:"https://www.chartjs.org/"}},[e._v("Chart.js")]),e._v(", "),a("a",{attrs:{href:"http://getskeleton.com/"}},[e._v("Skeleton")])])])}],o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"charts"}},[e._m(0),a("h1",{staticClass:"stats"},[a("span",[e._v("Statistiques sur")]),e._v(" "+e._s(e.meals)+" "),a("span",[e._v("repas")])])])},i=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"chart-container"}},[a("p",[e._v("Prix moyen du plat principal")]),a("canvas",{attrs:{id:"chart1"}}),a("p",[e._v("Aliments principaux pour un repas")]),a("canvas",{attrs:{id:"chart2"}}),a("p",[e._v("Aliments les plus courants")]),a("canvas",{attrs:{id:"chart3"}})])}],c=(a("55dd"),a("59ad")),d=a.n(c),u=a("a4bb"),l=a.n(u),f=(a("28a5"),a("6b54"),a("ac6a"),a("f499")),p=a.n(f),b=a("5b20"),m=a.n(b),h=a("bc3a"),v=a.n(h),j={name:"ChartPage",data:function(){return{meals:0}},mounted:function(){var e=this;v.a.get("/api/menu/all").then(function(t){e.meals=t.data.length;var a=JSON.parse(p()(t.data));a.forEach(function(e){e.x=new Date(1e3*e.date)}),m.a.defaults.global.defaultFontFamily="Raleway",new m.a("chart1",{type:"line",data:{datasets:[{label:"Prix estimé du plat principal (en €)",data:a,borderColor:"rgba(96, 145, 245, 0.5)",backgroundColor:"rgba(100, 200, 255, 0.2)",borderWidth:1}]},options:{tooltips:{callbacks:{label:function(e,t){return e.yLabel+"€"},title:function(e,t){var a=e[0].index,n=new Date(1e3*t.datasets[0].data[a].date),s=("0"+n.getDate()).slice(-2),r=("0"+(n.getMonth()+1)).slice(-2),o=n.getFullYear().toString().slice(-2),i=12===n.getHours()?"midi":"soir";return s+"/"+r+"/"+o+", repas du "+i}}},legend:{display:!1},scales:{xAxes:[{type:"time",time:{isoWeekday:!0,minUnit:"day",displayFormats:{hour:"H[h]",day:"DD[/]MM",month:"MMM",year:"Y"}}}],yAxes:[{ticks:{beginAtZero:!0,callback:function(e,t,a){return e+"€"}}}]}}});var n=JSON.parse(p()(t.data)),s=["légumes","féculents","poisson","viande"],r=[0,0,0,0];n.forEach(function(e){e.types=e.types.split(","),e.types.forEach(function(e){for(var t=0;t<s.length;t++)s[t]===e&&r[t]++})}),new m.a("chart2",{type:"pie",data:{labels:s,datasets:[{data:r,backgroundColor:["rgba(69, 255, 86, 0.2)","rgba(225, 167, 0, 0.2)","rgba(100, 200, 255, 0.2)","rgba(255, 45, 0, 0.2)"],borderColor:"#ccc",borderWidth:1}]},options:{tooltips:{callbacks:{label:function(e,t){var a=t.datasets[e.datasetIndex],n=a._meta[l()(a._meta)[0]],s=n.total,r=a.data[e.index],o=d()((r/s*100).toFixed(1));return r+" ("+o+"%)"},title:function(e,t){return t.labels[e[0].index]}}},legend:{position:"bottom"}}});var o=JSON.parse(p()(t.data)),i=[],c=[],u=[];o.forEach(function(e){e.foods=e.foods.split(","),e.types=e.types.split(","),e.foods.forEach(function(t,a){for(var n=!1,s=0;s<i.length;s++)if(i[s]===t){u[s]++,n=!0;break}if(!n){switch(i.push(t),e.types[a]){case"légumes":c.push("rgba(69, 255, 86, 0.2)");break;case"féculents":c.push("rgba(225, 167, 0, 0.2)");break;case"poisson":c.push("rgba(100, 200, 255, 0.2)");break;case"viande":c.push("rgba(255, 45, 0, 0.2)");break;default:c.push("rgba(100, 100, 100, 0.2)")}u.push(1)}})});var f=i.map(function(e,t){return{label:e,data:u[t],type:c[t]}}),b=f.sort(function(e,t){return t.data-e.data});i=[],c=[],u=[],b.forEach(function(e){i.push(e.label),c.push(e.type),u.push(e.data)}),new m.a("chart3",{type:"bar",data:{labels:i,datasets:[{data:u,backgroundColor:c,borderColor:"#ccc",borderWidth:1}]},options:{legend:{display:!1},scales:{yAxes:[{ticks:{beginAtZero:!0,callback:function(e,t,a){if(Math.floor(e)===e)return e}}}]}}})})}},g=j,y=(a("50a6"),a("2877")),_=Object(y["a"])(g,o,i,!1,null,"37bd454e",null),k=_.exports,w=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"insert"}},[a("h4",[e._v("Repas de "+e._s(e.formattedDate))]),a("p",[e._v("Contenu du repas")]),e._l(e.foods,function(t,n){return a("div",{key:t.id},[a("span",{staticClass:"autocomplete"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"food.name"}],staticClass:"entry",style:e.redOutlines(t),attrs:{type:"text"},domProps:{value:t.name},on:{keypress:function(t){e.complete=n},input:function(a){a.target.composing||e.$set(t,"name",a.target.value)}}}),e.complete==n?a("div",{staticClass:"autocomplete-items"},e._l(e.filteredApiFood(t),function(n){return a("div",{key:n.id,staticClass:"autocomplete-item",on:{click:function(e){t.name=n.name}}},[e._v(e._s(n.name))])}),0):e._e()]),0!==n?a("button",{staticClass:"delete",on:{click:function(t){return e.foods.splice(n,1)}}},[e._v("Supprimer")]):e._e(),n===e.foods.length-1?a("button",{staticClass:"button-primary add",on:{click:function(t){return e.addFood()}}},[e._v("Ajouter")]):e._e()])}),a("button",{staticClass:"button-primary submit",on:{click:function(t){return e.sendMeal()}}},[e._v(e._s(e.validateMeal))]),a("h4",{attrs:{id:"new"}},[e._v("Ajouter un nouvel ingrédient")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.newEntry.name,expression:"newEntry.name"}],staticClass:"entry",attrs:{type:"text"},domProps:{value:e.newEntry.name},on:{input:function(t){t.target.composing||e.$set(e.newEntry,"name",t.target.value)}}}),a("input",{directives:[{name:"model",rawName:"v-model",value:e.newEntry.price,expression:"newEntry.price"}],staticClass:"price",attrs:{type:"number",min:"0",max:"10",step:"0.1"},domProps:{value:e.newEntry.price},on:{input:function(t){t.target.composing||e.$set(e.newEntry,"price",t.target.value)}}}),e._v("€\n      "),a("select",{directives:[{name:"model",rawName:"v-model",value:e.newEntry.type,expression:"newEntry.type"}],attrs:{id:"category"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.$set(e.newEntry,"type",t.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"légumes"}},[e._v("légumes")]),a("option",{attrs:{value:"féculents"}},[e._v("féculents")]),a("option",{attrs:{value:"poisson"}},[e._v("poisson")]),a("option",{attrs:{value:"viande"}},[e._v("viande")])]),a("div"),a("button",{staticClass:"button-primary submit",on:{click:function(t){return e.registerFood()}}},[e._v(e._s(e.validateNewFood))])],2)},E=[],x=(a("7f7f"),{name:"InsertPage",data:function(){return{days:["lundi","mardi","mercredi","jeudi","vendredi"],foodId:1,foods:[{id:0,name:"",error:!1,foodId:0}],apiFood:[],newEntry:{name:"",price:0,type:"légumes"},complete:-1,validateMeal:"Envoyer le repas",validateNewFood:"Enregistrer le nouvel ingrédient",submitDate:new Date}},created:function(){this.getApiFood()},computed:{formattedDate:function(){var e,t,a=new Date;return e=0===a.getDay()||6===a.getDay()?this.days[4]:this.days[a.getDay()-1],t=a.getHours()>=18||a.getHours()<11?"soir":"midi",e+" "+t}},mounted:function(){document.addEventListener("click",this.onClick)},beforeDestroy:function(){document.removeEventListener("click",this.onClick)},methods:{addFood:function(){this.foods.push({id:this.foodId,name:""}),this.foodId++},onClick:function(){this.complete=-1},filteredApiFood:function(e){var t=[];return this.apiFood.forEach(function(a){-1!==a.name.indexOf(e.name)&&t.push(a)}),t.slice(0,3)},redOutlines:function(e){return 0===this.filteredApiFood(e).length&&""!==e.name?{"border-color":"#ff0000"}:""},sendMeal:function(){for(var e=this,t=0;t<this.foods.length;t++){for(var a=!0,n=0;n<this.apiFood.length;n++)if(this.foods[t].name===this.apiFood[n].name){a=!1,this.foods[t].foodId=this.apiFood[n].id;break}if(a)return}this.validateMeal="Envoi en cours ...";var s=new Date;s.getHours()>=18||s.getHours()<11?(s.setHours(19),s.setMinutes(0),s.setSeconds(0),s.setMilliseconds(0)):(s.setHours(12),s.setMinutes(0),s.setSeconds(0),s.setMilliseconds(0)),v.a.post("/api/menu/submit",{foods:this.foods,date:Math.floor(s.getTime()/1e3)}).then(function(){e.validateMeal="Repas envoyé !"})},registerFood:function(){var e=this;""!==this.newEntry.name&&0!==this.newEntry.price&&(this.validateNewFood="Envoi en cours ...",v.a.post("/api/food/register",{name:this.newEntry.name,price:this.newEntry.price,type:this.newEntry.type}).then(function(){e.validateNewFood="Nouvel ingrédient enregistré !",e.getApiFood()}))},getApiFood:function(){var e=this;v.a.get("/api/food/all").then(function(t){e.apiFood=t.data}).catch(function(){alert("Error: could not query the server")})}}}),C=x,F=(a("e69a"),Object(y["a"])(C,w,E,!1,null,"481080cb",null)),M=F.exports,P={name:"app",data:function(){return{currentPage:"ChartPage",btnText:"Ajouter un repas &nbsp;→"}},components:{ChartPage:k,InsertPage:M},methods:{btnClicked:function(){"ChartPage"==this.currentPage?(this.btnText="← &nbsp;Revenir aux graphes",this.currentPage="InsertPage"):(this.btnText="Ajouter un repas &nbsp;→",this.currentPage="ChartPage")}}},z=P,O=(a("034f"),Object(y["a"])(z,s,r,!1,null,null,null)),A=O.exports;a("3101"),a("3934a");n["a"].config.productionTip=!1,v.a.defaults.baseURL="",new n["a"]({render:function(e){return e(A)}}).$mount("#app")},"64a9":function(e,t,a){},"803f":function(e,t,a){},b149:function(e,t,a){},e69a:function(e,t,a){"use strict";var n=a("803f"),s=a.n(n);s.a}});
//# sourceMappingURL=app.b698de81.js.map